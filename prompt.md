# GitHub リポジトリ検索アプリケーション実装プロンプト

以下の仕様でGitHubリポジトリ検索アプリケーションを実装してください。

## アプリケーション概要

GitHubのリポジトリを検索し、詳細を確認できるWebアプリケーション

## 機能要件

### 1. メイン画面（リポジトリ検索・一覧）

- **検索機能**
  - リポジトリ名またはキーワードで検索
  - リアルタイム検索（入力中の検索）
  - 検索結果の並び替え（スター数、更新日など）
  - 検索履歴の保持
  
- **一覧表示**
  - リポジトリ名、説明、スター数、フォーク数、言語、更新日を表示
  - カード形式でレスポンシブな表示
  - 無限スクロールまたはページネーション
  - 各リポジトリカードから詳細ページへのリンク

### 2. 詳細画面（専用ページ）

- **詳細情報表示**
  - リポジトリの基本情報（名前、説明、作成者）
  - 統計情報（スター数、フォーク数、ウォッチャー数、イシュー数）
  - 言語構成（使用言語の割合）
  - 最新コミット情報
  - ライセンス情報
  - リポジトリURL（GitHub直リンク）
  - トピック・タグ表示
- **ナビゲーション**
  - 検索画面への戻るボタン
  - パンくずリスト
  - 前後のリポジトリへのナビゲーション（可能であれば）

## UI/UXワイヤーフレーム詳細

### メイン画面レイアウト

```txt
┌─────────────────────────────────────┐
│                タイトル              │
├─────────────────────────────────────┤
│ [検索ボックス] [検索ボタン]           │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ [AVATAR] リポジトリ名           │ │
│ │          リポジトリの説明       │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ [AVATAR] リポジトリ名           │ │
│ │          リポジトリの説明       │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ [AVATAR] リポジトリ名           │ │
│ │          リポジトリの説明       │ │
│ └─────────────────────────────────┘ │
│                  ・                 │
│                  ・                 │
│        ページネーションや           │
│        無限スクロールの配置         │
│        を行いましょう。             │
└─────────────────────────────────────┘
```

### 詳細ページレイアウト

```txt
┌─────────────────────────────────────┐
│ [← 戻る] > リポジトリ検索 > 詳細    │
├─────────────────────────────────────┤
│                タイトル              │
├─────────────────────────────────────┤
│ [AVATAR] リポジトリ名               │
│          作成者名                   │
│          リポジトリの詳細説明       │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ Star数  Watcher数  Fork数  Issue数│ │
│ │  200     200      200     200   │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 使用言語:                           │
│ ┌─────────────────────────────────┐ │
│ │ JavaScript: 60%                 │ │
│ │ TypeScript: 30%                 │ │
│ │ CSS: 10%                        │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 最新コミット: commit message        │
│ ライセンス: MIT License             │
│ トピック: [web] [frontend] [react]  │
│                                     │
│ [GitHubで開く]                      │
└─────────────────────────────────────┘
```

### デザイン仕様詳細

- **デザイン仕様**: プレースホルダーテキスト「リポジトリを検索してください」
- **リポジトリカード**: 
  - アバター画像（左側配置）
  - リポジトリ名（太字、クリック可能）
  - 説明文（グレーテキスト）
  - 統計情報（Star、Watcher、Fork、Issue数）
  - 詳細ページへのリンク
- **詳細ページ**:
  - パンくずリスト（検索画面への戻りリンク）
  - 戻るボタン
  - 詳細情報の階層表示
  - 言語構成の視覚的チャート
  - GitHubへの外部リンクボタン
- **ページネーション/無限スクロール**: 下部に配置
- **レスポンシブ対応**: モバイル・タブレット・デスクトップ

## 技術仕様

### フレームワーク・ライブラリ

- **Next.js 15+** (App Router必須)
- **Tailwind CSS** でスタイリング
- **TypeScript** で型安全性を確保
- **テスティングライブラリ**
  - Vitest（ユニットテスト・統合テスト）
  - React Testing Library（コンポーネントテスト）
  - Playwright（E2Eテスト）
  - MSW（Mock Service Worker）でAPIモック

### デザイン要件

- **シンプルかつモダンなデザイン**
  - ミニマリストなレイアウト
  - 適切な余白とタイポグラフィ
  - ダークモード対応
  - アニメーション・トランジション効果
  - レスポンシブデザイン（モバイルファースト）
- **ワイヤーフレーム準拠**
  - メイン画面: 検索バー上部配置、カード型リスト表示
  - 詳細ページ: パンくずリスト、統計情報の数値表示、戻るボタン配置
  - アバター画像の適切な配置とサイズ調整
  - 統計情報（Star、Watcher、Fork、Issue）の視覚的表現
  - 言語構成チャート、最新コミット情報、ライセンス情報の表示

### キャッシュ戦略

- **App Routerのキャッシュ機能を活用**
  - API Routes でのdata cache
  - リクエストメモ化の実装
  - 適切なrevalidate設定
  - ISR（Incremental Static Regeneration）の活用

### API仕様

- **GitHub API v4 (GraphQL)** または **GitHub REST API v3** を使用
- 必要に応じてAPI キーの設定（レート制限対応）
- エラーハンドリングとローディング状態の実装

### テスト要件

- **ユニットテスト**
  - 全コンポーネントのテスト
  - カスタムフックのテスト
  - ユーティリティ関数のテスト
- **統合テスト**
  - API Routes のテスト
  - ページレベルの統合テスト
- **E2Eテスト**
  - 主要なユーザーフローのテスト
  - 検索〜詳細表示の一連の流れ

## 実装すべきファイル構成

```txt
src/
├── app/
│   ├── layout.tsx                 # ルートレイアウト
│   ├── page.tsx                   # メインページ（検索・一覧）
│   ├── repository/
│   │   └── [owner]/
│   │       └── [name]/
│   │           └── page.tsx       # リポジトリ詳細ページ
│   ├── api/
│   │   └── repositories/
│   │       ├── route.ts           # リポジトリ検索API
│   │       └── [owner]/
│   │           └── [name]/
│   │               └── route.ts   # リポジトリ詳細API
│   └── globals.css                # グローバルスタイル
├── components/
│   ├── SearchBar.tsx              # 検索バーコンポーネント
│   ├── RepositoryCard.tsx         # リポジトリカードコンポーネント（アバター付き）
│   ├── RepositoryList.tsx         # リポジトリ一覧コンポーネント
│   ├── RepositoryDetail.tsx       # リポジトリ詳細コンポーネント
│   ├── LoadingSpinner.tsx         # ローディングコンポーネント
│   ├── ErrorBoundary.tsx          # エラーハンドリング
│   ├── BackButton.tsx             # 戻るボタンコンポーネント
│   ├── Breadcrumb.tsx             # パンくずリストコンポーネント
│   ├── LanguageChart.tsx          # 言語構成チャートコンポーネント
│   └── StatisticsDisplay.tsx      # 統計情報表示コンポーネント
├── types/
│   └── repository.ts              # TypeScript型定義
├── lib/
│   ├── github-api.ts              # GitHub API クライアント
│   └── utils.ts                   # ユーティリティ関数
├── hooks/
│   ├── useRepositories.ts         # リポジトリ検索カスタムフック
│   └── useDebounce.ts             # デバウンス処理フック
└── __tests__/                     # テストディレクトリ
    ├── components/
    │   ├── SearchBar.test.tsx
    │   ├── RepositoryCard.test.tsx
    │   ├── RepositoryList.test.tsx
    │   ├── RepositoryDetail.test.tsx
    │   ├── BackButton.test.tsx
    │   ├── Breadcrumb.test.tsx
    │   ├── LanguageChart.test.tsx
    │   └── StatisticsDisplay.test.tsx
    ├── hooks/
    │   ├── useRepositories.test.ts
    │   └── useDebounce.test.ts
    ├── lib/
    │   ├── github-api.test.ts
    │   └── utils.test.ts
    ├── api/
    │   └── repositories.test.ts
    ├── e2e/
    │   ├── search-flow.spec.ts
    │   ├── repository-details.spec.ts
    │   └── navigation.spec.ts
    ├── pages/
    │   ├── home.test.tsx
    │   └── repository-detail.test.tsx
    └── setup/
        ├── test-utils.tsx         # テストユーティリティ
        └── mocks/                 # モックデータ
            ├── github-api.ts
            └── repository-data.ts
```

## 実装上の注意点

1. **パフォーマンス最適化**
   - React.memo, useMemo, useCallback の適切な使用
   - 画像の最適化（next/image使用）
   - バンドルサイズの最適化

2. **ユーザビリティ**
   - 適切なローディング状態の表示
   - エラー状態のユーザーフレンドリーな表示
   - キーボードナビゲーション対応
   - アクセシビリティの考慮

3. **開発体験**
   - ESLint, Prettier の設定
   - 環境変数の適切な管理
   - コンポーネントの再利用性を意識

4. **テスト実装**
   - **テストカバレージ80%以上**を目標
   - **ユニットテスト**: 各コンポーネント、フック、ユーティリティ関数
   - **統合テスト**: API Routes、ページレベル
   - **E2Eテスト**: 重要なユーザーフロー
   - **モック**: GitHub API、外部依存関係
   - **スナップショットテスト**: UIコンポーネントの回帰防止
   - **Vitestの高速実行**とHMR（Hot Module Replacement）を活用

## テスト実装詳細

### ユニットテスト要件

- **コンポーネントテスト**
  - レンダリング確認
  - ユーザーインタラクション（クリック、入力）
  - プロパティの受け渡し
  - 条件分岐のテスト
  
- **カスタムフックテスト**
  - 状態変更の確認
  - 副作用の検証
  - エラーケースの処理
  
- **ユーティリティ関数テスト**
  - 入力値のバリデーション
  - 境界値テスト
  - エラーケース

### 統合テスト要件

- **API Routesテスト**
  - HTTPリクエスト/レスポンスの検証
  - エラーハンドリング
  - キャッシュ動作の確認
  
- **ページレベルテスト**
  - データフェッチとレンダリング
  - ナビゲーション動作

### E2Eテスト要件

- **検索フロー**
  - 検索実行→結果表示→詳細ページ遷移
  - 異なるデバイスサイズでの動作確認
- **ナビゲーションフロー**
  - 詳細ページからの戻る動作
  - パンくずリストでのナビゲーション
  - ブラウザの戻る/進むボタンでの動作
- **エラーシナリオ**
  - ネットワークエラー時の動作
  - API制限時の動作
  - 存在しないリポジトリへのアクセス時の404エラー処理

### テスト設定ファイル

```txt
├── vitest.config.ts               # Vitest設定
├── vitest.setup.ts                # Vitestセットアップ
├── vitest.setup.node.ts                # node環境のVitestセットアップ
├── __tests__/setup/
│   └── test-utils.tsx             # Testing Library カスタムレンダー
```

## 期待する成果物

- 完全に動作するNext.jsアプリケーション
- レスポンシブでモダンなUI/UX
- 高いパフォーマンスとユーザビリティ
- 保守性の高いコード構造
- 適切なエラーハンドリング
- **包括的なテストスイート**
  - 80%以上のテストカバレージ
  - CI/CDパイプラインでの自動テスト実行
  - テストレポートの生成

## 開発フロー推奨

1. **プロジェクトセットアップ**
   - Next.js プロジェクト作成
   - 必要依存関係のインストール（Vitest、React Testing Library、Playwright等）
   - テスト環境の構築（vitest.config.ts設定）

2. **基本機能実装**
   - GitHub API クライアント実装とテスト
   - 検索機能の実装とテスト
   - 一覧表示の実装とテスト

3. **詳細機能実装**
   - 詳細ページコンポーネントの実装とテスト
   - ルーティング・ナビゲーション機能の実装とテスト
   - キャッシュ機能の実装とテスト
   - E2Eテストの実装

4. **最適化・仕上げ**
   - パフォーマンス最適化
   - アクセシビリティ向上
   - テストカバレージの確認と改善

以上の仕様に基づいて、段階的に実装を進めてください。**テストファーストの開発**を心がけ、実装と並行してテストコードも作成することを強く推奨します。Vitestの高速実行とHMRを活用して、効率的な開発サイクルを構築してください。
